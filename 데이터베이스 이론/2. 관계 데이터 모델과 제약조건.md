# 2장. 관계 데이터 모델과 제약조건

## 1. 관계 데이터 모델의 개념

- **정의**
  - 관계 데이터 모델은 1970년 E.F. Codd가 제안한 데이터 모델로, 가장 개념이 단순하고 널리 사용되는 데이터 모델임.
  - 모든 데이터를 테이블(릴레이션)로 논리적으로 구성하며, 선언적 질의어(예: SQL)를 통해 데이터에 접근함.
  - 응용 프로그램은 데이터베이스 내 레코드의 순서와 무관하게 작성됨.
  - 사용자는 원하는 데이터(what)만 명시하고, 데이터를 찾는 방법(how)은 명시하지 않아도 됨.
  - 데이터 연결에 링크나 포인터를 사용하지 않음.

- **기본 용어**
  - **릴레이션(relation):** 2차원 테이블(스프레드시트와 유사)
  - **투플(tuple):** 릴레이션의 각 행(레코드)
  - **애트리뷰트(attribute):** 릴레이션의 각 열(필드)
  - **도메인(domain):** 한 애트리뷰트에 나타날 수 있는 값들의 집합. 값은 원자값(atomic value)이어야 함.
    - 예: EMPNAME CHAR(10), EMPNO INTEGER, DNO INTEGER

- **차수(degree)와 카디날리티(cardinality)**
  - **차수:** 한 릴레이션에 포함된 애트리뷰트의 수(최소 1)
  - **카디날리티:** 한 릴레이션에 포함된 투플의 수(0 이상 가능)

- **용어 대응표**

| 공식적 용어   | 자주 쓰는 용어 | 파일 시스템 용어 |
|---------------|---------------|-----------------|
| 릴레이션      | 테이블        | 파일            |
| 투플          | 행/레코드     | 레코드          |
| 애트리뷰트    | 열            | 필드            |

- **널값(null value)**
  - '알려지지 않음', '적용할 수 없음'을 나타냄
  - 예: 신입 사원의 부서번호(DNO)가 결정되지 않았을 때

- **릴레이션 스키마(relation schema)**
  - 릴레이션 이름과 애트리뷰트 집합(내포, intension)
  - 표기: 릴레이션이름(애트리뷰트1, 애트리뷰트2, ...)
  - 기본 키 애트리뷰트는 밑줄 표시

- **릴레이션 인스턴스(relation instance)**
  - 특정 시점의 투플 집합(외연, extension)
  - 시간에 따라 변함

- **관계 데이터베이스 스키마와 인스턴스**
  - **스키마:** 하나 이상의 릴레이션 스키마 집합
  - **인스턴스:** 릴레이션 인스턴스들의 모임

## 2. 릴레이션의 특성

- **투플들의 집합**
- **특성**
  - 각 릴레이션은 하나의 레코드 타입만 포함
  - 한 애트리뷰트 내 값은 모두 같은 유형
  - 애트리뷰트 순서는 중요하지 않음
  - 동일한 투플이 두 개 이상 존재하지 않음(키 존재)
  - 각 투플의 애트리뷰트는 원자값만 가짐
  - 각 애트리뷰트 이름은 한 릴레이션 내에서만 고유
  - 투플 순서는 중요하지 않음

## 3. 릴레이션의 키

- **수퍼 키(superkey)**
  - 투플을 고유하게 식별하는 애트리뷰트 집합(불필요한 속성 포함 가능)
- **후보 키(candidate key)**
  - 투플을 고유하게 식별하는 최소한의 애트리뷰트 집합(복합 키 가능)
- **기본 키(primary key)**
  - 후보 키 중 하나를 기본 키로 선정
- **대체 키(alternate key)**
  - 기본 키가 아닌 후보 키
- **외래 키(foreign key)**
  - 다른 릴레이션의 기본 키를 참조하는 애트리뷰트
  - 릴레이션 간 관계 표현에 사용
  - 참조되는 릴레이션의 기본 키와 동일한 도메인을 가져야 함

## 4. 무결성 제약조건

- **데이터 무결성(data integrity)**
  - 데이터의 정확성, 유효성, 일관성을 유지하는 규칙
  - DBMS가 자동으로 일관성 검사

- **도메인 제약조건(domain constraint)**
  - 각 애트리뷰트 값은 반드시 원자값이어야 함
  - 데이터 타입, 범위, 디폴트 값, NULL 허용 여부 등 지정 가능

- **키 제약조건(key constraint)**
  - 키 애트리뷰트에 중복값 불가

- **엔티티 무결성 제약조건(entity integrity constraint)**
  - 기본 키는 NULL 값 불가

- **참조 무결성 제약조건(referential integrity constraint)**
  - 외래 키 값은 참조되는 릴레이션의 기본 키 값과 같거나 NULL이어야 함
  - 참조 무결성 위배 시 DBMS가 자동으로 조치(제한, 연쇄, 널값, 디폴트값 등)

- **갱신 연산 시 무결성 제약조건**
  - **삽입:** 참조 무결성 위배 가능성 있음
  - **삭제:** 참조 무결성 위배 가능성 있음
  - **수정:** 기본 키/외래 키 수정 시 삽입/삭제와 유사하게 처리

## 5. 관계 데이터베이스 관리 시스템(관계 DBMS) 제품

| 분류         | 예시 제품                                      |
|--------------|------------------------------------------------|
| 다수 사용자용| 오라클, MS SQL Server, DB2, INFORMIX, SYBASE   |
| 개인용       | MSFT/Access, InstanceDB, Simple Text           |

## 6. 관계 데이터 모델의 성공 요인

- **간단한 테이블(릴레이션) 사용**
- **중첩된 복잡한 구조 없음**
- **집합 위주 데이터 처리**
- **사용자 친화적 이해**
- **표준 응용에 좋은 성능**
- **이론적 체계 확립**
- **설계 및 질의 처리 우수**


