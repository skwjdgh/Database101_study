## 12. 정규 표현식
### 12. 정규 표현식
- **REGEXP_REPLACE, REGEXP_SUBSTR, REGEXP_INSTR, REGEXP_LIKE, REGEXP_COUNT**
- **패턴 매칭**: 숫자, 문자, 특수기호, 반복, 위치 등

```
-- 샘플 테이블 생성
CREATE TABLE sample_data (text VARCHAR2(100));
INSERT INTO sample_data VALUES ('abc123@example.com');
INSERT INTO sample_data VALUES ('02-1234-5678');
INSERT INTO sample_data VALUES ('Hello World 2024!');
INSERT INTO sample_data VALUES ('가나다 123 AB');

-- 1. REGEXP_REPLACE: 패턴에 맞는 부분 문자열 치환
SELECT 
  text AS 원본,
  REGEXP_REPLACE(text, '\d', 'X') AS 숫자X로변경,          -- 모든 숫자를 X로 변경
  REGEXP_REPLACE(text, '(\d{2,4})-(\d{4})-(\d{4})', '(\1) \2-\3') AS 전화번호포맷팅 -- 02-1234-5678 → (02) 1234-5678
FROM sample_data;

-- 2. REGEXP_SUBSTR: 패턴에 맞는 부분 문자열 추출
SELECT 
  text AS 원본,
  REGEXP_SUBSTR(text, '\d+') AS 첫번째숫자추출,          -- 123
  REGEXP_SUBSTR(text, '[A-Za-z]+@[A-Za-z]+\.[A-Za-z]+') AS 이메일추출  -- example.com
FROM sample_data;

-- 3. REGEXP_INSTR: 패턴 시작 위치 반환
SELECT 
  text AS 원본,
  REGEXP_INSTR(text, '\d') AS 첫숫자위치,               -- 4 (abc"1"23@...)
  REGEXP_INSTR(text, '[A-Z]') AS 첫대문자위치            -- 11 (Hello "W"orld...)
FROM sample_data;

-- 4. REGEXP_LIKE: 패턴 존재 여부 확인
SELECT 
  text AS 원본
FROM sample_data
WHERE REGEXP_LIKE(text, '^\d{2,3}-\d{3,4}-\d{4}$');    -- 전화번호 형식 검사

-- 5. REGEXP_COUNT: 패턴 매칭 횟수 반환
SELECT 
  text AS 원본,
  REGEXP_COUNT(text, '\d') AS 숫자개수,                -- 3 (abc"123"@...)
  REGEXP_COUNT(text, '[A-Za-z]') AS 영문자개수          -- 10 (abc@example.com)
FROM sample_data;

-- 6. 주요 패턴 예시
/*
1. 숫자: 
   - \d: 단일 숫자 
   - \d{3}: 정확히 3자리 숫자
   - \d{3,5}: 3~5자리 숫자

2. 문자: 
   - [A-Z]: 대문자 
   - [a-z]+: 1개 이상 소문자
   - [가-힣]: 한글

3. 특수기호: 
   - \.: 점 문자(이스케이프 필요)
   - \@: @ 기호

4. 반복: 
   - AB*: A 다음 B 0회 이상
   - AB+: A 다음 B 1회 이상
   - AB?: A 다음 B 0~1회

5. 위치: 
   - ^: 문자열 시작
   - $: 문자열 끝
   - \b: 단어 경계

예시 패턴:
- 전화번호: ^\d{2,3}-\d{3,4}-\d{4}$
- 이메일: ^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$
- 주민등록번호: \d{6}-[1-4]\d{6}
*/

```

```
원본: abc123@example.com
숫자X로변경: abcXXX@example.com
전화번호포맷팅: abc123@example.com (변경 없음)

원본: 02-1234-5678
숫자X로변경: XX-XXXX-XXXX
전화번호포맷팅: (02) 1234-5678

```