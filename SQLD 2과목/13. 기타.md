
## 13. 기타 
### 13-1. 제약조건
- **PRIMARY KEY**: 기본키, 유일성, NULL 불가
- **UNIQUE**: 고유값, NULL 허용
- **FOREIGN KEY**: 외래키, 참조 무결성
- **NOT NULL**: NULL 불가
- **CHECK**: 값 범위 제한

```
-- 13-1. 제약조건 예시

-- PRIMARY KEY: 기본키(유일성, NULL 불가)
CREATE TABLE users (
  user_id NUMBER PRIMARY KEY,
  username VARCHAR2(50) NOT NULL
);

-- UNIQUE: 고유값(중복 불가, NULL 허용)
ALTER TABLE users ADD CONSTRAINT uk_username UNIQUE (username);

-- FOREIGN KEY: 외래키(참조 무결성)
CREATE TABLE orders (
  order_id NUMBER PRIMARY KEY,
  user_id NUMBER,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- NOT NULL: NULL 불가
ALTER TABLE users MODIFY username VARCHAR2(50) NOT NULL;

-- CHECK: 값 범위 제한
ALTER TABLE users ADD CONSTRAINT chk_age CHECK (age > 0);

```

### 13-2. 기타 객체
- **VIEW**: 가상 테이블, 보안/편의성 제공
- **SEQUENCE**: 일련번호 자동 생성
- **SYNONYM**: 객체 별칭

```
-- 13-2. 기타 객체 예시

-- VIEW: 가상 테이블
CREATE VIEW user_orders AS
SELECT u.user_id, u.username, o.order_id
FROM users u
JOIN orders o ON u.user_id = o.user_id;

-- SEQUENCE: 일련번호 자동 생성
CREATE SEQUENCE seq_user_id START WITH 1 INCREMENT BY 1;

-- SYNONYM: 객체 별칭
CREATE SYNONYM usr FOR users;

```

### 13-2. 주요 특징 및 주의사항
- **트랜잭션**: 원자성, 일관성, 고립성, 지속성(ACID)
- **무결성**: 개체, 참조, 도메인, NULL, 고유, 키 무결성
- **DROP vs TRUNCATE vs DELETE**: 구조/데이터 삭제, 롤백 가능 여부, 저장공간 반환 여부
- **제약조건 관리**: 생성, 삭제, 수정, 참조 무결성 옵션(ON DELETE CASCADE, SET NULL 등)


```
-- 13-3. 주요 특징 및 주의사항 예시

-- 트랜잭션: 원자성, 일관성, 고립성, 지속성(ACID)
BEGIN TRANSACTION;
  INSERT INTO users VALUES (1, '홍길동', 30);
  INSERT INTO orders VALUES (101, 1);
COMMIT;
-- 또는
BEGIN TRANSACTION;
  INSERT INTO users VALUES (2, '김철수', 25);
  ROLLBACK; -- 트랜잭션 취소

-- 무결성: 개체, 참조, 도메인, NULL, 고유, 키 무결성
-- (SQL 문법으로 직접 명시하는 것이 아니라, 제약조건 및 트랜잭션으로 관리)

-- DROP vs TRUNCATE vs DELETE
DELETE FROM users; -- 데이터만 삭제(롤백 가능)
TRUNCATE TABLE users; -- 데이터만 삭제(빠름, 대부분 롤백 불가)
DROP TABLE users; -- 테이블 구조까지 삭제

-- 제약조건 관리
-- 참조 무결성 옵션(ON DELETE CASCADE, SET NULL 등)
ALTER TABLE orders
ADD CONSTRAINT fk_user_id
FOREIGN KEY (user_id) REFERENCES users(user_id)
ON DELETE CASCADE; -- 부모 삭제 시 자식도 삭제

ALTER TABLE orders
ADD CONSTRAINT fk_user_id
FOREIGN KEY (user_id) REFERENCES users(user_id)
ON DELETE SET NULL; -- 부모 삭제 시 자식의 외래키를 NULL로 설정

```