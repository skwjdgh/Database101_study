## 2. 함수
### 2. 함수
- **문자함수**: LOWER, UPPER, SUBSTR, INSTR, LENGTH, CONCAT, REPLACE, TRIM 등
```
-- LOWER: 문자열을 소문자로 변환
SELECT LOWER('ABC') AS result;         -- 결과: abc

-- UPPER: 문자열을 대문자로 변환
SELECT UPPER('abc') AS result;         -- 결과: ABC

-- SUBSTR: 문자열의 일부를 추출
SELECT SUBSTR('ABCDE', 2, 3) AS result;   -- 결과: BCD
SELECT SUBSTR('ABCDE', -4, 3) AS result;  -- 결과: BCD

-- INSTR: 특정 문자의 위치 반환
SELECT INSTR('A#B#C#', '#', 2, 1) AS result;  -- 결과: 4 (두 번째 #의 위치)
SELECT INSTR('A#B#C#', '#', 1, 3) AS result;  -- 결과: 6 (세 번째 #의 위치)

-- LTRIM: 왼쪽에서 특정 문자 제거
SELECT LTRIM('AAABABA', 'A') AS result;   -- 결과: BABA

-- RTRIM: 오른쪽에서 특정 문자 제거
SELECT RTRIM('ABABAAA', 'A') AS result;   -- 결과: ABAB

-- TRIM: 양쪽 공백 또는 특정 문자 제거
SELECT TRIM(' ABCDE ') AS result;         -- 결과: ABCDE

-- LPAD: 왼쪽에 문자를 채워 길이 맞춤
SELECT LPAD('ABC', 5, '*') AS result;     -- 결과: **ABC

-- RPAD: 오른쪽에 문자를 채워 길이 맞춤
SELECT RPAD('ABC', 5, '*') AS result;     -- 결과: ABC**

-- CONCAT: 문자열 연결
SELECT CONCAT('A', 'B') AS result;        -- 결과: AB

-- LENGTH: 문자열 길이 반환
SELECT LENGTH('ABC') AS result;           -- 결과: 3

-- REPLACE: 문자열 치환
SELECT REPLACE('ABBA', 'A', 'B') AS result;   -- 결과: BBBB

-- TRANSLATE: 문자 단위로 치환
SELECT TRANSLATE('ABBA', 'AB', 'ab') AS result; -- 결과: abba

```

- **숫자함수**: ROUND, TRUNC, MOD, ABS, CEIL, FLOOR 등
  
```
-- 절대값 반환
SELECT ABS(-1.5) AS result;                 -- 1.5

-- 소수점 둘째자리에서 반올림
SELECT ROUND(123.456, 2) AS result;         -- 123.46

-- 정수의 십의 자리에서 반올림
SELECT ROUND(123.456, -2) AS result;        -- 100

-- 소수점 둘째자리에서 버림
SELECT TRUNC(123.456, 2) AS result;         -- 123.45

-- 숫자가 양수면 1, 음수면 -1, 0이면 0 반환
SELECT SIGN(100) AS result;                 -- 1

-- 작거나 같은 최대 정수 반환
SELECT FLOOR(3.5) AS result;                -- 3

-- 크거나 같은 최소 정수 반환
SELECT CEIL(3.5) AS result;                 -- 4

-- 나머지 반환
SELECT MOD(7, 2) AS result;                 -- 1

-- 거듭제곱
SELECT POWER(2, 4) AS result;               -- 16

-- 제곱근
SELECT SQRT(16) AS result;                  -- 4

```

- **날짜함수**: SYSDATE, ADD_MONTHS, MONTHS_BETWEEN, LAST_DAY, NEXT_DAY 등

```
-- SYSDATE: 현재 날짜와 시간 반환
SELECT SYSDATE FROM dual;
-- 예시 결과: 2024/02/14 18:44:34

-- CURRENT_DATE: 현재 날짜 반환(세션 타임존 기준)
SELECT CURRENT_DATE FROM dual;
-- 예시 결과: 2024/02/14

-- CURRENT_TIMESTAMP: 현재 타임스탬프(날짜+시간+타임존) 반환
SELECT CURRENT_TIMESTAMP FROM dual;
-- 예시 결과: 2024/02/14 18:45:29 +09:00

-- ADD_MONTHS(날짜, n): 날짜에서 n개월 후(또는 전) 날짜 반환
SELECT ADD_MONTHS(SYSDATE, 3) FROM dual;
-- 예시 결과: 2024/05/14 18:44:34

-- MONTHS_BETWEEN(날짜1, 날짜2): 날짜1과 날짜2의 개월 수 차이 반환
SELECT MONTHS_BETWEEN(SYSDATE, TO_DATE('2023-12-01', 'YYYY-MM-DD')) FROM dual;
-- 예시 결과: 2.4516...

-- LAST_DAY(날짜): 해당 월의 마지막 날 반환
SELECT LAST_DAY(SYSDATE) FROM dual;
-- 예시 결과: 2024/02/29 18:44:34

-- NEXT_DAY(날짜, n): 지정한 요일(n) 이후의 첫 번째 날짜 반환 (1:일요일, 2:월요일, ..., 7:토요일)
SELECT NEXT_DAY(SYSDATE, 1) FROM dual;
-- 예시 결과: 2024/02/18 18:51:35

-- ROUND(날짜, 'MONTH'): 지정한 자리수에서 날짜 반올림
SELECT ROUND(SYSDATE, 'MONTH') FROM dual;
-- 예시 결과: 2024/03/01 00:00:00

-- TRUNC(날짜, 'MONTH'): 지정한 자리수에서 날짜 버림
SELECT TRUNC(SYSDATE, 'MONTH') FROM dual;
-- 예시 결과: 2024/02/01 00:00:00
```

- **변환함수**: TO_CHAR, TO_NUMBER, TO_DATE, CAST 등
```

-- TO_NUMBER: 문자열을 숫자로 변환
SELECT TO_NUMBER('100') AS result;
-- 결과: 100


-- 문자열 변환
SELECT TO_CHAR(SYSDATE, 'YYYY-MM-DD') AS 기본_날짜형식 FROM DUAL;
SELECT TO_CHAR(SYSDATE, 'YYYY/MM/DD HH24:MI:SS') AS 날짜_시간_24시 FROM DUAL;
SELECT TO_CHAR(SYSDATE, 'YYYY"년"MM"월"DD"일"') AS 한글_날짜 FROM DUAL;
SELECT TO_CHAR(SYSDATE, 'DAY, DY, DDD, Q') AS 요일_약어_일수_분기 FROM DUAL;
SELECT TO_CHAR(SYSDATE, 'YYYY-MM-DD"T"HH24:MI:SS') AS ISO_날짜 FROM DUAL;
SELECT TO_CHAR(SYSDATE, 'HH:MI:SS AM') AS 오전오후_시간 FROM DUAL;

-- 숫자 포맷
SELECT TO_CHAR(1234567.89, '9,999,999.99') AS 천단위_구분 FROM DUAL;
SELECT TO_CHAR(1234567.89, '$9,999,999.99') AS 달러표시 FROM DUAL;
SELECT TO_CHAR(1234567.89, 'L9,999,999.99') AS 현지통화표시 FROM DUAL;
SELECT TO_CHAR(9000, '9,999') AS 천단위_콤마 FROM DUAL;
SELECT TO_CHAR(9000, '09999') AS 5자리_앞0 FROM DUAL;
SELECT TO_CHAR(1234.5678, '9.9EEEE') AS 과학적_표기 FROM DUAL;

-- 날짜 및 숫자 조합 예시
SELECT TO_CHAR(SYSDATE, 'DY "the" DDth "of" MONTH') AS 설명형_날짜 FROM DUAL;
SELECT TO_CHAR(SYSDATE, 'YYYY-MM-DD', 'NLS_DATE_LANGUAGE=FRENCH') AS 프랑스어_날짜 FROM DUAL;

-- INTERVAL 및 기타 데이터타입 변환
SELECT TO_CHAR(INTERVAL '123-2' YEAR(3) TO MONTH) AS 간격_문자열 FROM DUAL;

-- NULL 처리 예시
SELECT NVL(TO_CHAR(NULL), '값없음') AS 널처리 FROM DUAL;

-- TO_DATE: 주어진 문자열을 포맷에 맞게 날짜로 변환
SELECT TO_DATE('2024/01/01', 'YYYY/MM/DD') AS result;
-- 결과: 2024/01/01 00:00:00

-- FORMAT: 날짜를 지정한 포맷으로 변환(SQL Server)
SELECT FORMAT(GETDATE(), 'yyyy') AS result;
-- 결과: 2024

-- CAST: 데이터 타입 변환(문자열을 정수로)
SELECT CAST('100' AS int) AS result;
-- 결과: 100


```
- **그룹함수**: SUM, AVG, COUNT, MIN, MAX, VARIANCE, STDDEV 등
```
-- COUNT: 행의 수 리턴
SELECT COUNT(SAL) FROM EMP;

-- SUM: 총 합 리턴
SELECT SUM(SAL) FROM EMP;

-- AVG: 평균 리턴
SELECT AVG(SAL) FROM EMP;

-- MIN: 최소값 리턴
SELECT MIN(SAL) FROM EMP;

-- MAX: 최대값 리턴
SELECT MAX(SAL) FROM EMP;

-- VARIANCE: 분산 리턴
SELECT VARIANCE(SAL) FROM EMP;

-- STDDEV: 표준편차 리턴
SELECT STDDEV(SAL) FROM EMP;
```

- **일반함수**:
```
-- DECODE: 값에 따라 다른 결과 반환(Oracle)
SELECT DECODE(DEPTNO, 10, 'A', 20, 'B', 'C') AS result FROM EMP;
-- DEPTNO가 10이면 A, 20이면 B, 그 외는 C

-- NVL: NULL이면 대체값 반환(Oracle)
SELECT NVL(COMM, 0) AS result FROM EMP;
-- COMM이 NULL이면 0 반환, 아니면 COMM 값 반환

-- NVL2: NULL 여부에 따라 두 값 중 하나 반환(Oracle)
SELECT NVL2(COMM, COMM*1.1, 0) AS result FROM EMP;
-- COMM이 NULL이 아니면 COMM*1.1, NULL이면 0 반환

-- COALESCE: 여러 값 중 첫 번째 NOT NULL 값 반환(표준 SQL)
SELECT COALESCE(NULL, 100, 200) AS result;
-- NULL이 아니면 그 값을 반환, 모두 NULL이면 마지막 값 반환(여기선 100 반환)

-- ISNULL: NULL이면 대체값 반환(SQL Server)
SELECT ISNULL(NULL, 100) AS result;
-- NULL이면 100 반환

-- NULLIF: 두 값이 같으면 NULL, 다르면 첫 번째 값 반환(표준 SQL)
SELECT NULLIF(10, 20) AS result;
-- 10과 20이 다르므로 10 반환

-- CASE문: 조건에 따라 결과 반환(표준 SQL)
SELECT CASE WHEN DEPTNO = 10 THEN 'A'
            WHEN DEPTNO = 20 THEN 'B'
            ELSE 'C' END AS result
FROM EMP;
-- DEPTNO가 10이면 A, 20이면 B, 그 외는 C
```