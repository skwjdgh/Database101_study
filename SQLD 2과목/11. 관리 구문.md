## 11. 관리 구문

### 11-1. DML (Data Manipulation Language)
- **INSERT**: 데이터 추가
- **UPDATE**: 데이터 수정
- **DELETE**: 데이터 삭제
- **MERGE**: 조건에 따라 INSERT/UPDATE/DELETE 동시 수행


```
-- 11-1. DML 예시
-- INSERT: 데이터 추가
INSERT INTO employees (emp_id, emp_name, salary) VALUES (101, '홍길동', 5000);
INSERT INTO employees SELECT * FROM temp_employees;  -- 서브쿼리로 다중 행 추가

-- UPDATE: 데이터 수정
UPDATE employees SET salary = salary * 1.1 WHERE dept_id = 10;
UPDATE employees SET (salary, job_id) = (SELECT avg_sal, 'DEV' FROM dept_avg WHERE dept_id = 10) WHERE emp_id = 101;

-- DELETE: 데이터 삭제
DELETE FROM employees WHERE emp_id = 101;
DELETE FROM employees;  -- 모든 행 삭제

-- MERGE: 조건부 INSERT/UPDATE
MERGE INTO employees e
USING (SELECT emp_id, salary FROM temp_employees) t
ON (e.emp_id = t.emp_id)
WHEN MATCHED THEN
  UPDATE SET e.salary = t.salary
WHEN NOT MATCHED THEN
  INSERT (emp_id, salary) VALUES (t.emp_id, t.salary);


  ```

### 11-2. TCL (Transaction Control Language)
- **COMMIT**: 변경 내용 저장
- **ROLLBACK**: 변경 내용 취소
- **SAVEPOINT**: 트랜잭션 내 저장점 지정


```
-- 11-2. TCL 예시
-- COMMIT/ROLLBACK/SAVEPOINT
BEGIN TRANSACTION;
  INSERT INTO employees VALUES (102, '김철수', 4000);
  SAVEPOINT sp1;
  UPDATE employees SET salary = 4500 WHERE emp_id = 102;
  ROLLBACK TO sp1;  -- 업데이트 취소, INSERT는 유지
COMMIT;
```

### 11-3. DDL (Data Definition Language)
- **CREATE**: 테이블, 인덱스, 뷰 등 생성
- **ALTER**: 테이블 구조 변경(컬럼 추가/수정/삭제, 제약조건 추가/삭제)
- **DROP**: 객체 삭제
- **TRUNCATE**: 데이터만 삭제(구조 유지)
- **RENAME**: 객체 이름 변경

```
-- 11-3. DDL 예시
-- CREATE: 테이블 생성
CREATE TABLE employees (
  emp_id    NUMBER PRIMARY KEY,
  emp_name  VARCHAR2(50) NOT NULL,
  salary    NUMBER(8,2) CHECK(salary > 0)
);

-- ALTER: 테이블 구조 변경
ALTER TABLE employees ADD (hire_date DATE);
ALTER TABLE employees MODIFY (emp_name VARCHAR2(100));
ALTER TABLE employees DROP COLUMN hire_date;

-- DROP: 테이블 삭제
DROP TABLE employees;

-- TRUNCATE: 데이터 전체 삭제
TRUNCATE TABLE employees;

-- RENAME: 테이블 이름 변경
RENAME employees TO staff;

```

### 11-4. DCL (Data Control Language)
- **GRANT**: 권한 부여
- **REVOKE**: 권한 회수
- **ROLE**: 권한의 묶음, 사용자에게 부여

```
-- 11-4. DCL 예시
-- GRANT/REVOKE: 권한 부여/회수
GRANT SELECT, INSERT ON employees TO user1;
REVOKE INSERT ON employees FROM user1;

-- ROLE: 권한 그룹 생성 및 부여
CREATE ROLE hr_role;
GRANT SELECT, UPDATE ON employees TO hr_role;
GRANT hr_role TO user2;
```